{% extends '@SiploMedia/siplo_media_form_layout.html.twig' %}
{% form_theme form 'bootstrap_3_layout.html.twig' %}



{# app/Resources/views/Meetup/create.html.twig #}
{#{% block form %}#}
    {#{{ form_start(form) }}#}
        {#{{ form_widget(form.country, {'attr': {'id':'meetup_sport'}}) }}#}
        {#{{ form_widget(form.category, {'attr': {'id':'meetup_position'}}) }}#}
    {#{{ form_end(form) }}#}
{#{% endblock form %}#}

{#{% block javascripts %}#}
    {#{{ parent() }}#}
    {#<script>#}
        {#var $country = $('#meetup_sport');#}
        {#// When sport gets selected ...#}
        {#$country.change(function() {#}
            {#// ... retrieve the corresponding form.#}
            {#var $form = $(this).closest('form');#}
            {#// Simulate form data, but only include the selected sport value.#}
            {#var data = {};#}
            {#data[$country.attr('name')] = $country.val();#}
            {#// Submit data via AJAX to the form's action path.#}
            {#$.ajax({#}
                {#url : $form.attr('action'),#}
                {#type: $form.attr('method'),#}
                {#data : data,#}
                {#success: function(html) {#}
                    {#// Replace current position field ...#}
                    {#$('#meetup_position').replaceWith(#}
                            {#// ... with the returned one from the AJAX response.#}
                            {#$(html).find('#meetup_position')#}
                    {#);#}
                    {#// Position field now displays the appropriate positions.#}
                {#}#}
            {#});#}
        {#});#}
    {#</script>#}
{#{% endblock javascripts %}#}


{% block form %}
    {#{{ form_start(form) }}#}
    {#{{ form_row(form.country) }}    &#123;&#35; <select id="meetup_sport" ... &#35;&#125;#}
    {#{{ form_row(form.category) }} &#123;&#35; <select id="meetup_position" ... &#35;&#125;#}
    {#&#123;&#35; ... &#35;&#125;#}
    {#{{ form_end(form) }}#}
    {{ form_start(form) }}
    {{ form_widget(form) }}
    {{ form_end(form) }}

    {#<script>#}
        {#var $country = $('#siplo_mediabundle_photo_country');#}
        {#// When sport gets selected ...#}
        {#$country.change(function() {#}
            {#// ... retrieve the corresponding form.#}
            {#var $form = $(this).closest('form');#}
            {#// Simulate form data, but only include the selected sport value.#}
            {#var data = {};#}
            {#data[$country.attr('name')] = $country.val();#}
{#//            data['id'] = 'Sri Lanka';#}
            {#// Submit data via AJAX to the form's action path.#}
            {#$.ajax({#}
                {#url : $form.attr('action'),#}
                {#type: $form.attr('method'),#}
                {#data : data,#}
                {#success: function(html) {#}
                    {#// Replace current position field ...#}
                    {#$('#siplo_mediabundle_photo_category').replaceWith(#}
                            {#// ... with the returned one from the AJAX response.#}
                            {#$(html).find('#siplo_mediabundle_photo_category')#}
                    {#);#}
                    {#// Position field now displays the appropriate positions.#}
                {#}#}
            {#});#}
        {#});#}
    {#</script>#}
{% endblock %}



